# Практическая работа № 2.
## Оглавление
- [Изучение общих принципов построения IP-сетей](#section1)
  - [Цель работы](#section1.1)  
  - [Требования](#section1.2)  
- [Ход работы](#section2)  
  - [Тестирование работы концентратора в среде моделирования Cisco Packet Tracer](#section2.1)  
  - [Краткие теоретические сведения.](#section2.2)  
  - [Основные команды Cisco IOS](#section2.3)
  - [Организация и моделирование виртуальных сетей.](#section3)
- [Вывлд](#section3.1)
    
## <a name="section1">Изучение общих принципов построения IP-сетей (адресация и маршрутизация).</a>  

### <a name="section1.1">Цель работы</a>  
Целью данной лабораторной работы является изучение и практическое ознакомление с основными принципами работы концентраторов и коммутаторов второго уровня в компьютерных сетях, а также настройка и использование DHCP-сервера для автоматической выдачи IP-адресов в локальной сети.  

### <a name="section1.2">Требования</a>  
Для выполнения работы необходима установка симулятора CISCO PacketTracer.  

## <a name="section2">Ход работы</a>
 
### <a name="section2.1">Тестирование работы концентратора в среде моделирования Cisco Packet Tracer</a>  
В сеть №3 (192.168.32.0/19) будут работать заданные 6 устройств, из лабораторной работы №2. Таким образом, все устройства будут находиться в подсети 192.168.32.0/22 и иметь широковещательный адрес 192.168.35.255

> Проверка

![image](https://github.com/DeFomin/2023-2024-computer-networks-k33212-fomintsev-d-r/assets/90705279/df27b5d0-f3f3-4440-bf48-64216493652d)

![image](https://github.com/DeFomin/2023-2024-computer-networks-k33212-fomintsev-d-r/assets/90705279/c2f62382-2957-4844-8000-229ff893e9f9)

В режиме симуляции все устройства успешно обмениваются данными через концентратор и сам концентратор выполняет свою функцию распределения данных всем подключенным устройствам без фильтрации или управления трафиком.

При попытке отправки множества pdu происходит коллизия данных.

![image](https://github.com/DeFomin/2023-2024-computer-networks-k33212-fomintsev-d-r/assets/90705279/6ec7880e-cda0-4c18-9577-14829ab64303)

### <a name="section2.2">Краткие теоретические сведения.</a>

Для структурирования локальной сети используются виртуальные локальные сети (анг. VLAN) – работа которых регламентируется стандартом IEEE 802.1q. VLAN позволяет внутри одной физической локальной сети построить несколько отдельных логических сетей (виртуальных сетей), узлы которых изолированы от остальных участков сети даже по широковещательному трафику, даже в том случае, если несколько VLAN работают на одном коммутаторе.  
Принадлежность порта к VLAN определяется идентификатором сети – VLAN-ID. Порт коммутатора может работать в режиме Access или Tranсk.  Режим Access служит для подключения компьютера и на порт может быть назначен один VLAN-ID. Режим Tranсk служит для соединения коммутаторов и позволяет передать несколько VLAN между коммутаторами.   
VLAN-ID = 1 является служебным. Его использование для организации сетевых VLAN не рекомендуется.
Настройке VLAN доступна как на коммутаторах L2, так и на L3. Работа с IP адресами и поддержка дополнительных функций TCP\IP доступна только на L3.
Для конфигурирования узлов в IP сетях применяется протокол DHCP. DHCP-сервер получает запросы от DHCP-клиентов и выдает в ответ конфигурацию IP (ip, mask, gateway, DNS). Для этого DHCP сервер и DHCP-клиенты должны находиться в одной локальной сети (в одном широковещательном домене). Широковещательное пакеты не передаются между сетями, соединёнными через маршрутизацию. Если в корпоративной сети один DHCP-сервер, а локальных сетей несколько, то  в сети должен быть настроен DHCP-relay – сетевой узел, чаще всего коммутатор L3, который получает широковещательные запросы из всех локальных сетей и передают их как одноадресные пакеты на IP адрес настроенного DHCP-сервера и осуществляющий обратную пересылку.
Тестирование связи можно осуществлять средствами Cisco Packet Tracer или утилитой Ping из командного интерпретатора на элементе компьютер или сервер.
Настройки оборудования можно частичноы провести через графический интерфейс Cisco Packet Tracer и полностью с помощью командного интерфейса, типичного для устройств Cisco.  

## <a name="section2.3">Основные команды Cisco IOS:</a>  
enable – вход в привилегированный режим  
configure terminal – переход в конфигуратор  
vlan database – вход в базу VLAN  
vlan НОМЕР name ИМЯ – добавление VLAN  
interface ИМЯ_ПОРТА– вход в конфигурацию порта коммутатора  
switchport access vlan НОМЕР – перевод порта в режим access с НОМЕРом VLAN  
switchport mode trunk – перевод порта в режим trunk  
ip address IP MASK – назначение на физический порт, логический порт или VLAN IP адреса и маски  
ip helper-address IP – конфигурирование DHCP-relay. Адрес здесь – адрес DHCP-сервера  
switchport trunk encapsulation dot1q – включение инкапсуляции VLAN по IEEE 802.1q  
copy running-config startup-config – сохранение текущей конфигурации  
exit – выход из контекста конфигурации или конфигуратора  
show ip interface – показать IP на интерфейсах  
show ip interface brief– показать краткую информацию о IP на интерфейсах  

### <a name="section3">Организация и моделирование виртуальных сетей.</a>  

Согласно условию из лабораторной работы №2 в каждом помещении находится соответствующее количество устройств. Поскольку в прошлой лабораторной работе в первой сети было пять подсетей, во второй сети было две, а в третьей сети было три, значит, в этом задании необходимо создать аналогичнную.

> Схема построения (Каждый vlan выделен определенным цветом, согласно таблице)

<img src="https://github.com/DeFomin/2023-2024-computer-networks-k33212-fomintsev-d-r/assets/90705279/2d1c4002-5fa4-42fd-831a-53ce9d8ce28b" width=700>

![image](https://github.com/DeFomin/2023-2024-computer-networks-k33212-fomintsev-d-r/assets/90705279/cce83a2e-7589-4963-8130-d490c6277ebc)

Сначала для всех коммутаторов была добавлена информация о всех существующих VLAN:  
```
interface FastEthernet0/n
switchport access vlan N
```
N - номер vlan
n - номер порта

Для всех портов, которые соединяются с другими промежуточными сетевыми устройствами  
```
interface FastEthernet0/n
switchport mode trunk
```

После настройки всех коммутаторов были добавлены коммутатор третьего уровня и сервер DCHP.  
> Настройка dhcp сервера

<img src="https://github.com/DeFomin/2023-2024-computer-networks-k33212-fomintsev-d-r/assets/90705279/5991098f-e4d1-49fc-977a-dbd5c8dbb6ff" width="700">

Для каждого VLAN, в коммутатор L3 была добавлена информация о всех существующих VLAN. 
```
interface vlan N
ip address 10.N.0.254 255.255.255.0
ip helper-address 10.60.0.1
```

После этого для порта, в который подключен другой коммутатор включаем инкапсуляцию и включаем транк мод:  
```
interface FastEthernet0/n
switchport trunk encapsulation dot1q
switchport mode trunk
```

Настройка порта, в который подключен DHCP сервер. Поскольку сервер находится в VLAN 60:  
```
interface FastEthernet0/n
switchport access vlan 60
```

Включаем dhcp на ПК и выполняем проверку доступности:
1. В сети 1 в сеть 6 на vlan 10  
![image](https://github.com/DeFomin/2023-2024-computer-networks-k33212-fomintsev-d-r/assets/90705279/74acb3e1-ad87-4b8f-ab6f-e47713840cca)

2. В сети 2 из vlan 10 на vlan 20
![image](https://github.com/DeFomin/2023-2024-computer-networks-k33212-fomintsev-d-r/assets/90705279/e7f77213-16b3-4e3f-9153-d95198850171)

### <a name="section3.1">Вывод.</a>  

В ходе выполнения данной лабораторной работы я изучил и практически ознакомился с основными принципами работы концентраторов и коммутаторов второго и третьего уровней, а также настроил и использовал DHCP-сервер дляавтоматической выдачи IP-адресов в локальной сети для различных vlan.








